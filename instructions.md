# Instru√ß√µes de Implementa√ß√£o - Sistema de Gest√£o de Ordens de Servi√ßo

## An√°lise do Estado Atual

O projeto √© um sistema completo de gest√£o de ordens de servi√ßo que inclui:

### ‚úÖ **Implementado Atualmente**

#### Backend
- ‚úÖ Estrutura do servidor Express com TypeScript
- ‚úÖ Sistema de autentica√ß√£o com Passport.js e sess√µes
- ‚úÖ Schema completo do banco de dados (Drizzle ORM)
- ‚úÖ Storage em mem√≥ria com dados de exemplo
- ‚úÖ Rotas CRUD para:
  - Clientes (customers)
  - T√©cnicos (technicians) 
  - Ordens de servi√ßo (work orders)
  - Notas (notes)
  - Transa√ß√µes financeiras (transactions)
  - Contas banc√°rias (accounts)
  - Or√ßamentos (budgets)
  - Itens do cat√°logo (catalog items)
  - Itens de ordem de servi√ßo (work order items)
- ‚úÖ Sistema de relat√≥rios financeiros
- ‚úÖ Middleware de autoriza√ß√£o por perfis (admin, t√©cnico, cliente)

#### Frontend
- ‚úÖ Estrutura React com TypeScript e Vite
- ‚úÖ Roteamento com Wouter
- ‚úÖ Sistema de autentica√ß√£o completo
- ‚úÖ Dashboard principal com estat√≠sticas
- ‚úÖ Gerenciamento de ordens de servi√ßo (listagem, cria√ß√£o, edi√ß√£o)
- ‚úÖ Layout responsivo com sidebar e navega√ß√£o m√≥vel
- ‚úÖ Componentes UI base (shadcn/ui)
- ‚úÖ Formul√°rios com valida√ß√£o (React Hook Form + Zod)
- ‚úÖ Sistema de estado com TanStack Query
- ‚úÖ P√°gina de finan√ßas (overview)

---

## üöß **Pendente de Implementa√ß√£o**

### 1. **P√ÅGINAS FRONTEND INCOMPLETAS**

#### 1.1 Clientes (ALTA PRIORIDADE)
**Localiza√ß√£o**: `client/src/pages/customers/`
- ‚ùå P√°gina de listagem de clientes (`index.tsx`)
- ‚ùå Formul√°rio de cria√ß√£o/edi√ß√£o de clientes
- ‚ùå P√°gina de detalhes do cliente
- ‚ùå Componentes espec√≠ficos de clientes

**Funcionalidades necess√°rias:**
- Listagem com filtros e pagina√ß√£o
- Formul√°rio CRUD com valida√ß√£o
- Visualiza√ß√£o de hist√≥rico de ordens por cliente
- Informa√ß√µes de contato e endere√ßo

#### 1.2 T√©cnicos (ALTA PRIORIDADE)
**Localiza√ß√£o**: `client/src/pages/technicians/`
- ‚ùå P√°gina de listagem de t√©cnicos (`index.tsx`)
- ‚ùå Formul√°rio de cria√ß√£o/edi√ß√£o de t√©cnicos
- ‚ùå P√°gina de detalhes do t√©cnico
- ‚ùå Componentes espec√≠ficos de t√©cnicos

**Funcionalidades necess√°rias:**
- Listagem com filtros por especializa√ß√£o
- Formul√°rio CRUD com campos de especializa√ß√£o
- Dashboard do t√©cnico com ordens atribu√≠das
- Calend√°rio de disponibilidade

#### 1.3 Cat√°logo de Produtos/Servi√ßos (M√âDIA PRIORIDADE)
**Localiza√ß√£o**: `client/src/pages/catalog/`
- ‚úÖ P√°gina principal (`index.tsx`) - CRIADA MAS VAZIA
- ‚ùå P√°gina de detalhes (`[id].tsx`) - CRIADA MAS VAZIA
- ‚ùå P√°gina de cria√ß√£o (`new.tsx`) - CRIADA MAS VAZIA
- ‚ùå P√°gina de edi√ß√£o (`edit/[id].tsx`) - CRIADA MAS VAZIA
- ‚ùå Componentes de cat√°logo

**Funcionalidades necess√°rias:**
- Listagem de produtos e servi√ßos
- Formul√°rios de cria√ß√£o/edi√ß√£o
- Sistema de tags e categorias
- Controle de pre√ßos e custos
- Integra√ß√£o com ordens de servi√ßo

#### 1.4 M√≥dulo Financeiro (M√âDIA PRIORIDADE)
**Localiza√ß√£o**: `client/src/pages/finance/`
- ‚úÖ Overview financeiro (`index.tsx`) - IMPLEMENTADO
- ‚ùå Transa√ß√µes (`transactions.tsx`) - CRIADA MAS VAZIA
- ‚ùå Contas a pagar (`accounts-payable.tsx`) - CRIADA MAS VAZIA
- ‚ùå Contas a receber (`accounts-receivable.tsx`) - CRIADA MAS VAZIA
- ‚ùå Contas banc√°rias (`accounts.tsx`) - CRIADA MAS VAZIA
- ‚ùå Or√ßamentos (`budgets.tsx`) - CRIADA MAS VAZIA
- ‚ùå Relat√≥rios (`reports.tsx`) - CRIADA MAS VAZIA

**Funcionalidades necess√°rias:**
- Interface de transa√ß√µes com filtros avan√ßados
- Gest√£o de contas a pagar/receber
- Controle de contas banc√°rias
- Sistema de or√ßamentos
- Relat√≥rios financeiros com gr√°ficos

#### 1.5 Configura√ß√µes (BAIXA PRIORIDADE)
**Localiza√ß√£o**: `client/src/pages/settings/`
- ‚ùå P√°gina de configura√ß√µes (`index.tsx`) - CRIADA MAS VAZIA

**Funcionalidades necess√°rias:**
- Configura√ß√µes do sistema
- Perfil do usu√°rio
- Configura√ß√µes de notifica√ß√µes
- Backup e exporta√ß√£o de dados

### 2. **COMPONENTES FRONTEND PENDENTES**

#### 2.1 Componentes de Clientes
**Localiza√ß√£o**: `client/src/components/customers/`
- ‚ùå `customer-card.tsx` - Card de cliente
- ‚ùå `customer-form.tsx` - Formul√°rio de cliente
- ‚ùå `customer-filter.tsx` - Filtros de listagem
- ‚ùå `customer-details.tsx` - Detalhes do cliente

#### 2.2 Componentes de T√©cnicos
**Localiza√ß√£o**: `client/src/components/technicians/`
- ‚ùå `technician-card.tsx` - Card de t√©cnico
- ‚ùå `technician-form.tsx` - Formul√°rio de t√©cnico
- ‚ùå `technician-filter.tsx` - Filtros de listagem
- ‚ùå `technician-calendar.tsx` - Calend√°rio do t√©cnico

#### 2.3 Componentes de Cat√°logo
**Localiza√ß√£o**: `client/src/components/catalog/`
- ‚ùå `catalog-item-card.tsx` - Card de item
- ‚ùå `catalog-item-form.tsx` - Formul√°rio de item
- ‚ùå `catalog-filter.tsx` - Filtros e busca
- ‚ùå `price-calculator.tsx` - Calculadora de pre√ßos

#### 2.4 Componentes Financeiros
**Localiza√ß√£o**: `client/src/components/finance/`
- ‚ùå `transaction-form.tsx` - Formul√°rio de transa√ß√£o
- ‚ùå `transaction-table.tsx` - Tabela de transa√ß√µes
- ‚ùå `account-form.tsx` - Formul√°rio de conta
- ‚ùå `budget-form.tsx` - Formul√°rio de or√ßamento
- ‚ùå `financial-charts.tsx` - Gr√°ficos financeiros

### 3. **FUNCIONALIDADES BACKEND PENDENTES**

#### 3.1 Sistema de Notifica√ß√µes
- ‚ùå WebSocket para notifica√ß√µes em tempo real
- ‚ùå Sistema de emails autom√°ticos
- ‚ùå Notifica√ß√µes push

#### 3.2 Sistema de Arquivos
- ‚ùå Upload de anexos para ordens de servi√ßo
- ‚ùå Fotos de produtos no cat√°logo
- ‚ùå Documentos financeiros

#### 3.3 Relat√≥rios Avan√ßados
- ‚ùå Gera√ß√£o de PDFs
- ‚ùå Exporta√ß√£o para Excel
- ‚ùå Relat√≥rios personalizados

### 4. **MELHORIAS E OTIMIZA√á√ïES**

#### 4.1 Interface do Usu√°rio
- ‚ùå Modo escuro
- ‚ùå Personaliza√ß√£o de tema
- ‚ùå Acessibilidade (ARIA)
- ‚ùå Internacionaliza√ß√£o (i18n)

#### 4.2 Performance
- ‚ùå Lazy loading de p√°ginas
- ‚ùå Otimiza√ß√£o de imagens
- ‚ùå Cache avan√ßado
- ‚ùå Service Workers

#### 4.3 Seguran√ßa
- ‚ùå Rate limiting
- ‚ùå Valida√ß√£o avan√ßada de entrada
- ‚ùå Logs de auditoria
- ‚ùå Backup autom√°tico

---

## üìã **Roteiro de Implementa√ß√£o Recomendado**

### **FASE 1: Funda√ß√µes (Semana 1-2)**
**Prioridade: CR√çTICA**

#### Sprint 1.1: Gest√£o de Clientes
1. **P√°gina de listagem de clientes** (`/customers`)
   - Listagem com pagina√ß√£o
   - Filtros b√°sicos (nome, email, cidade)
   - Busca em tempo real
2. **Formul√°rio de cliente** (criar/editar)
   - Valida√ß√£o completa com Zod
   - Campos: nome, email, telefone, endere√ßo, empresa
3. **P√°gina de detalhes do cliente**
   - Informa√ß√µes completas
   - Hist√≥rico de ordens de servi√ßo
   - Bot√µes de a√ß√£o (editar, nova ordem)

#### Sprint 1.2: Gest√£o de T√©cnicos
1. **P√°gina de listagem de t√©cnicos** (`/technicians`)
   - Listagem com especializa√ß√£o
   - Status (dispon√≠vel, ocupado, ausente)
   - Filtros por especializa√ß√£o
2. **Formul√°rio de t√©cnico** (criar/editar)
   - Dados pessoais e especializa√ß√µes
   - Hor√°rios de trabalho
3. **Dashboard do t√©cnico**
   - Ordens atribu√≠das
   - Calend√°rio semanal

### **FASE 2: Cat√°logo e Opera√ß√µes (Semana 3-4)**
**Prioridade: ALTA**

#### Sprint 2.1: Cat√°logo de Produtos/Servi√ßos
1. **P√°gina principal do cat√°logo** (`/catalog`)
   - Grid de produtos/servi√ßos
   - Filtros por tipo, categoria, pre√ßo
   - Busca avan√ßada
2. **Formul√°rios CRUD do cat√°logo**
   - Cria√ß√£o/edi√ß√£o de itens
   - Upload de imagens (futuro)
   - Sistema de tags
3. **Integra√ß√£o com ordens de servi√ßo**
   - Sele√ß√£o de itens ao criar ordem
   - C√°lculo autom√°tico de pre√ßos

#### Sprint 2.2: Melhorias nas Ordens de Servi√ßo
1. **P√°gina de detalhes expandida**
   - Timeline de status
   - Anexos e fotos
   - Itens utilizados
2. **Sistema de aprova√ß√£o**
   - Workflow de aprova√ß√£o
   - Notifica√ß√µes por email

### **FASE 3: M√≥dulo Financeiro (Semana 5-6)**
**Prioridade: M√âDIA-ALTA**

#### Sprint 3.1: Transa√ß√µes e Contas
1. **P√°gina de transa√ß√µes** (`/finance/transactions`)
   - Listagem completa com filtros
   - Formul√°rio de cria√ß√£o/edi√ß√£o
   - Categoriza√ß√£o autom√°tica
2. **Contas banc√°rias** (`/finance/accounts`)
   - Gest√£o de contas
   - Saldos em tempo real
   - Concilia√ß√£o banc√°ria

#### Sprint 3.2: Contas a Pagar/Receber
1. **Interface de contas a pagar** (`/finance/accounts-payable`)
   - Lista de pend√™ncias
   - Agendamento de pagamentos
   - Status de pagamento
2. **Interface de contas a receber** (`/finance/accounts-receivable`)
   - Faturas em aberto
   - Controle de vencimentos
   - Hist√≥rico de recebimentos

### **FASE 4: Relat√≥rios e Analytics (Semana 7-8)**
**Prioridade: M√âDIA**

#### Sprint 4.1: Dashboards Avan√ßados
1. **Gr√°ficos financeiros**
   - Recharts para visualiza√ß√µes
   - Fluxo de caixa visual
   - Gr√°ficos de performance
2. **Relat√≥rios operacionais**
   - Performance de t√©cnicos
   - An√°lise de ordens de servi√ßo
   - Indicadores de qualidade

#### Sprint 4.2: Sistema de Or√ßamentos
1. **Gest√£o de or√ßamentos** (`/finance/budgets`)
   - Cria√ß√£o de or√ßamentos por categoria
   - Acompanhamento vs realizado
   - Alertas de limite
2. **Relat√≥rios gerenciais** (`/finance/reports`)
   - Demonstrativo de resultados
   - Balan√ßo patrimonial
   - Exporta√ß√£o em PDF

### **FASE 5: Funcionalidades Avan√ßadas (Semana 9-10)**
**Prioridade: BAIXA-M√âDIA**

#### Sprint 5.1: Sistema de Notifica√ß√µes
1. **WebSocket para tempo real**
   - Notifica√ß√µes instant√¢neas
   - Updates de status em tempo real
2. **Sistema de emails**
   - Templates personalizados
   - Agendamento de envios

#### Sprint 5.2: Configura√ß√µes e Personaliza√ß√µes
1. **P√°gina de configura√ß√µes** (`/settings`)
   - Configura√ß√µes do sistema
   - Perfil do usu√°rio
   - Prefer√™ncias de notifica√ß√£o
2. **Temas e acessibilidade**
   - Modo escuro/claro
   - Tamanhos de fonte
   - Contraste alto

---

## üõ† **Instru√ß√µes T√©cnicas Espec√≠ficas**

### **Padr√µes de Desenvolvimento**

#### Frontend (React/TypeScript)
```typescript
// Estrutura padr√£o de p√°gina
const PageName = () => {
  // Hooks de estado
  const [loading, setLoading] = useState(false);
  
  // Queries com TanStack Query
  const { data, isLoading } = useQuery({
    queryKey: ['/api/endpoint'],
  });
  
  // Mutations para altera√ß√µes
  const mutation = useMutation({
    mutationFn: (data) => apiRequest('POST', '/api/endpoint', data),
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: ['/api/endpoint'] });
    }
  });
  
  return (
    <div className="container mx-auto py-6">
      {/* Conte√∫do da p√°gina */}
    </div>
  );
};
```

#### Formul√°rios
```typescript
// Padr√£o para formul√°rios
const FormComponent = ({ onClose, itemId }: FormProps) => {
  const form = useForm<FormData>({
    resolver: zodResolver(schema),
    defaultValues: { /* valores iniciais */ }
  });
  
  const mutation = useMutation({
    mutationFn: async (values) => {
      const method = itemId ? 'PUT' : 'POST';
      const url = itemId ? `/api/endpoint/${itemId}` : '/api/endpoint';
      return apiRequest(method, url, values);
    },
    onSuccess: () => {
      toast({ title: "Sucesso!" });
      queryClient.invalidateQueries({ queryKey: ['/api/endpoint'] });
      onClose();
    }
  });
  
  return (
    <Form {...form}>
      <form onSubmit={form.handleSubmit(mutation.mutate)}>
        {/* Campos do formul√°rio */}
      </form>
    </Form>
  );
};
```

### **Estrutura de Arquivos**
```
client/src/
‚îú‚îÄ‚îÄ pages/
‚îÇ   ‚îú‚îÄ‚îÄ customers/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.tsx (listagem)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ [id].tsx (detalhes)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ new.tsx (cria√ß√£o)
‚îÇ   ‚îú‚îÄ‚îÄ technicians/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ [id].tsx
‚îÇ   ‚îî‚îÄ‚îÄ catalog/
‚îÇ       ‚îú‚îÄ‚îÄ index.tsx
‚îÇ       ‚îú‚îÄ‚îÄ [id].tsx
‚îÇ       ‚îú‚îÄ‚îÄ new.tsx
‚îÇ       ‚îî‚îÄ‚îÄ edit/[id].tsx
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ customers/
‚îÇ   ‚îú‚îÄ‚îÄ technicians/
‚îÇ   ‚îú‚îÄ‚îÄ catalog/
‚îÇ   ‚îî‚îÄ‚îÄ finance/
‚îî‚îÄ‚îÄ hooks/
    ‚îú‚îÄ‚îÄ use-customers.ts
    ‚îú‚îÄ‚îÄ use-technicians.ts
    ‚îî‚îÄ‚îÄ use-catalog.ts
```

### **Conven√ß√µes de Nomenclatura**

- **Arquivos**: kebab-case (`customer-form.tsx`)
- **Componentes**: PascalCase (`CustomerForm`)
- **Vari√°veis**: camelCase (`customerData`)
- **APIs**: RESTful (`GET /api/customers`, `POST /api/customers`)

### **Tratamento de Erros**
```typescript
// Padr√£o para tratamento de erros
const { data, error, isLoading } = useQuery({
  queryKey: ['/api/endpoint'],
  onError: (error) => {
    toast({
      title: "Erro ao carregar dados",
      description: error.message,
      variant: "destructive"
    });
  }
});
```

---

## üìä **Crit√©rios de Aceita√ß√£o**

### **Qualidade do C√≥digo**
- ‚úÖ TypeScript sem erros
- ‚úÖ Valida√ß√£o com Zod em todos os formul√°rios
- ‚úÖ Tratamento de erro consistente
- ‚úÖ Loading states em todas as opera√ß√µes
- ‚úÖ Responsividade mobile-first

### **Funcionalidade**
- ‚úÖ CRUD completo para todas as entidades
- ‚úÖ Valida√ß√£o client-side e server-side
- ‚úÖ Feedback visual para usu√°rio
- ‚úÖ Navega√ß√£o intuitiva
- ‚úÖ Performance adequada

### **Testes (Futuro)**
- ‚ùå Testes unit√°rios (Jest/Vitest)
- ‚ùå Testes de integra√ß√£o
- ‚ùå Testes E2E (Playwright)

---

## üéØ **Pr√≥ximos Passos Imediatos**

1. **Implementar p√°gina de clientes** - come√ßar com listagem b√°sica
2. **Criar formul√°rio de cliente** - incluir valida√ß√£o completa
3. **Implementar p√°gina de t√©cnicos** - similar aos clientes
4. **Desenvolver componentes reutiliz√°veis** - cards, filtros, tabelas

**Tempo estimado total**: 8-10 semanas para implementa√ß√£o completa

**Recursos necess√°rios**: 1-2 desenvolvedores full-stack com experi√™ncia em React/TypeScript

---

*Documento criado em: 17 de junho de 2025*
*√öltima atualiza√ß√£o: 17 de junho de 2025*